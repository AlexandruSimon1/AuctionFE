{"ast":null,"code":"import { Purchasing } from './../../../models/purchasing';\nimport { Bidding } from 'src/app/models/bidding';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auction.service\";\nimport * as i2 from \"./../../../services/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/security/authentication.service\";\nimport * as i5 from \"./../../../services/bidding.service\";\nimport * as i6 from \"./../../../services/purchasing.service\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/common\";\nexport let AuctionDetailComponent = /*#__PURE__*/(() => {\n  class AuctionDetailComponent {\n    constructor(auctionService, userService, activatedRoute, authenticationService, biddingService, purchasingService) {\n      this.auctionService = auctionService;\n      this.userService = userService;\n      this.activatedRoute = activatedRoute;\n      this.authenticationService = authenticationService;\n      this.biddingService = biddingService;\n      this.purchasingService = purchasingService;\n    }\n\n    ngOnInit() {\n      const currentUser = this.authenticationService.currentUserValue;\n      this.getUser(currentUser.id);\n      this.getAuction(this.activatedRoute.snapshot.params.id);\n    }\n\n    createBidding() {\n      const user = this.user;\n      const auction = this.auctions;\n      this.bidding = {\n        auction,\n        user\n      };\n      this.biddingService.createBidding(this.bidding).subscribe(() => {\n        this.bidding = new Bidding();\n      }, error => console.log(error));\n    }\n\n    createPurchasing() {\n      const user = this.user;\n      const auction = this.auctions;\n      this.purchasing = {\n        auction,\n        user\n      };\n      this.purchasingService.createPurchasing(this.purchasing).subscribe(() => {\n        this.purchasing = new Purchasing();\n      }, error => console.log(error));\n    }\n\n    getAuction(id) {\n      this.auctionService.getAuctionById(id).subscribe(auction => {\n        this.auctions = auction;\n        return this.auctions;\n      }, error => console.log(error));\n    }\n\n    getUser(userId) {\n      this.userService.getUserById(userId).subscribe(user => {\n        this.user = user;\n        return this.user;\n      }, error => console.log(error));\n    }\n\n  }\n\n  AuctionDetailComponent.ɵfac = function AuctionDetailComponent_Factory(t) {\n    return new (t || AuctionDetailComponent)(i0.ɵɵdirectiveInject(i1.AuctionService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.AuthenticationService), i0.ɵɵdirectiveInject(i5.BiddingService), i0.ɵɵdirectiveInject(i6.PurchasingService));\n  };\n\n  AuctionDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AuctionDetailComponent,\n    selectors: [[\"app-auction-detail\"]],\n    decls: 23,\n    vars: 9,\n    consts: [[1, \"h-100\", \"d-flex\", \"flex-row\"], [1, \"img-thumbnail\", 2, \"max-width\", \"25%\", 3, \"src\"], [1, \"h-100\", \"d-flex\", \"flex-row\", \"align-items-right\"], [1, \"d-flex\", \"justify-content-right\"], [1, \"col\"], [1, \"display-1\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"]],\n    template: function AuctionDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵelementStart(1, \"section\", 0);\n        i0.ɵɵelementStart(2, \"div\");\n        i0.ɵɵelement(3, \"img\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"aside\", 2);\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelementStart(6, \"aside\", 4);\n        i0.ɵɵelementStart(7, \"h1\", 5);\n        i0.ɵɵelementStart(8, \"b\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"h3\");\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"h5\");\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"h5\");\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"h5\");\n        i0.ɵɵtext(17);\n        i0.ɵɵpipe(18, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AuctionDetailComponent_Template_button_click_19_listener() {\n          return ctx.createBidding();\n        });\n        i0.ɵɵtext(20, \"New Bid\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AuctionDetailComponent_Template_button_click_21_listener() {\n          return ctx.createPurchasing();\n        });\n        i0.ɵɵtext(22, \"Buy Now\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate1(\"src\", \"assets/images/\", ctx.auctions.photos, \"\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.auctions.title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.auctions.description);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Buy now price: \", ctx.auctions.buyNow, \" USD\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Starting Bid: \", ctx.auctions.minimumPrice, \" USD\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"End date: \", i0.ɵɵpipeBind2(18, 6, ctx.auctions.endDate, \"EEEE h:mm a\"), \"\");\n      }\n    },\n    directives: [i7.MatButton],\n    pipes: [i8.DatePipe],\n    styles: [\"\"]\n  });\n  return AuctionDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}